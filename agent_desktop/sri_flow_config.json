{
  "_comment": "Reemplace los selectores y pasos con los reales del SRI.",
  "target_url_login": "https://srienlinea.sri.gob.ec",
  "debug_table_steps_sample": {
    "steps": [
      {
        "type": "assertOnPage",
        "urlPattern": "anexo-gastos-personales|anexos\\.jsf",
        "anyText": ["Anexos"]
      }
    ]
  },
  "provider_open": {
  "steps": [
    {
      "type": "ensureSidebarOpen",
      "hamburger": "button#sri-menu",
      "sidebar1": "#mySidebar",
      "sidebar2": "#mySidebar2"
    },

    {
      "type": "clickAny",
      "selectors": [
        "css=#mySidebar a.ui-panelmenu-header-link:has-text('ANEXOS')",
        "css=#mySidebar span.ui-menuitem-text:has-text('ANEXOS')"
      ]
    },

    {
      "type": "clickAny",
      "selectors": [
        "css=#mySidebar a.ui-menuitem-link:has-text('Anexo de gastos personales en línea')",
        "css=#mySidebar span.ui-menuitem-text:has-text('Anexo de gastos personales en línea')"
      ]
    },

    {
      "type": "clickAny",
      "logUrlAfter": true,
      "selectors": [
        "css=#mySidebar a.ui-menuitem-link:has-text('Generación anexo')",
        "css=#mySidebar a.ui-menuitem-link[href*='tportal-internet/accederAplicacion.jspa?redireccion=101&idGrupo=98']",
        "css=#mySidebar a.ui-menuitem-link[href*='tportal-internet/accederAplicacion.jspa?redireccion=101']"
      ]
    },

    {
      "type": "waitForURL",
      "timeout": 60000,
      "pattern": "tportal-internet|accederAplicacion\\.jspa|sriservicios\\.sri\\.gob\\.ec/anexo-gastos-personales|anexo-gastos-personales|anexos\\.jsf"
    }
  ]
},

  "anexo_period_ensure": {
    "steps": [
      {
        "type": "assertOnPage",
        "urlPattern": "anexo-gastos-personales\\/anexos\\.jsf|\\/anexos\\.jsf",
        "anyText": ["Anexos"]
      },
      {
        "type": "trySteps",
        "log": "anexo_period_ensure periodoTarget={{periodoTarget}}",
        "steps": [
          {
            "type": "clickRowAction",
            "table": "css=table#anexos\\:lista-anexos",
            "rowText": "{{periodoTarget}}",
            "actionSelectors": [
              "css=a:has-text('Editar anexo')",
              "css=a:has-text('Editar')",
              "css=button:has-text('Editar anexo')",
              "css=button:has-text('Editar')"
            ]
          }
        ],
        "fallbackSteps": [
          {
            "type": "clickAny",
            "selectors": [
              "css=a.btn.btn-sm.btn-primary:has-text('Nuevo')",
              "css=a[href*='nuevo-anexo.jsf']:has-text('Nuevo')"
            ]
          },
          {
            "type": "assertOnPage",
            "urlPattern": "nuevo-anexo\\.jsf",
            "anyText": ["Anexo"]
          },
          {
            "type": "assertOnPage",
            "selector": "css=select#reg_periodo"
          },
          {
            "type": "select",
            "selector": "css=select#reg_periodo",
            "label": "{{periodoTarget}}"
          },
          {
            "type": "assertOnPage",
            "selector": "css=input#reg_crear"
          },
          {
            "type": "click",
            "selector": "css=input#reg_crear"
          },
          {
            "type": "assertOnPage",
            "urlPattern": "anexo-gastos-personales\\/anexos\\.jsf|\\/anexos\\.jsf",
            "anyText": ["Anexos"]
          },
          {
            "type": "clickRowAction",
            "table": "css=table#anexos\\:lista-anexos",
            "rowText": "{{periodoTarget}}",
            "actionSelectors": [
              "css=a:has-text('Editar anexo')",
              "css=a:has-text('Editar')",
              "css=button:has-text('Editar anexo')",
              "css=button:has-text('Editar')"
            ]
          }
        ]
      }
    ]
  },



  "invoice_open": {
    "steps": [
      { "type": "fill", "selector": "REEMPLAZAR_SELECTOR_CLAVE", "text": "{{clave_acceso}}" },
      { "type": "click", "selector": "REEMPLAZAR_SELECTOR_ABRIR_FACTURA" }
    ]
  },
  "apply": {
    "steps_before_confirm": [
      { "type": "waitForSelector", "selector": "REEMPLAZAR_SELECTOR_FORM" }
    ],
    "category_selector": "REEMPLAZAR_SELECTOR_CATEGORIA",
    "category_mode": "select",
    "category_map": {
      "123": { "value": "123" },
      "Categoria Ejemplo": { "label": "Categoria Ejemplo" }
    },
    "confirm_selector": "REEMPLAZAR_SELECTOR_GUARDAR"
  }
}
